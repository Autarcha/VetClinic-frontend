<p-dialog
  header="Edytuj informacje o wizycie"
  [(visible)]="displayModal"
  [style]="{ width: '50vw' }"
  (onHide)="closeModal()"
>
  <form
    class="col-lg-6 col-md-8 col-sm-10 col-12 m-auto"
    [formGroup]="visitForm"
    (ngSubmit)="editVisit()"
  >
    <div class="form-group mt-4">
      <label for="employeeId">Pracownik</label>
      <select
        formControlName="employeeId"
        name="employeeId"
        class="form-control"
        id="employeeId"
        type="number"
      >
        <option disabled>Wybierz pracownika</option>
        <option *ngFor="let employee of employees" [value]="employee.id">
          {{ employee.name + "" + employee.surname }}
        </option>
      </select>
      <div
        *ngIf="
          !visitForm.controls['employeeId'].valid &&
          (visitForm.controls['employeeId'].dirty ||
            visitForm.controls['employeeId'].touched)
        "
      >
        <div
          class="text-danger"
          *ngIf="visitForm.controls['employeeId'].errors?.['required']"
        >
          Pole pracownik jest wymagane
        </div>
      </div>
    </div>
    <div class="form-group mt-4">
      <label for="animalId">Klient</label>
      <select
        formControlName="animalId"
        name="animalId"
        class="form-control"
        id="animalId"
        type="number"
      >
        <option disabled>Wybierz zwierzę</option>
        <option *ngFor="let animal of customerAnimals" [value]="animal.id">
          {{ "Imię: " + animal.name + " " + "Rasa: " + animal.specie }}
        </option>
      </select>
    </div>
    <div class="form-group mt-4">
      <label for="visitDateTime">Termin wizyty</label>
      <p-calendar
        [(ngModel)]="visit.visitDateTime"
        [showTime]="true"
        [showSeconds]="true"
        name="visitDateTime"
        inputId="visitDateTime"
        id="visitDateTime"
        formControlName="visitDateTime"
      ></p-calendar>
    </div>
    <div class="form-group mt-4">
      <label for="visitStatus">Status wizyty</label>
      <select
        formControlName="visitStatus"
        name="visitStatus"
        class="visitStatus"
        id="visitStatus"
        type="visitStatus"
      >
        <option disabled>Wybierz status wizyty</option>
        <option *ngFor="let status of visitStatuses" [value]="status">
          {{ visitStatusesMapping[status] }}
        </option>
      </select>
    </div>
    <div class="text-center">
      <button
        type="submit"
        class="btn btn-dark mt-4 form-control"
        [disabled]="!visitForm.valid"
      >
        Edytuj informacje
      </button>
    </div>
  </form>
  <p-button
    iconPos="left"
    class="mt-3"
    style="float: right"
    icon="pi pi-check"
    (click)="closeModal()"
    label="Zakończ"
    styleClass="p-button-text"
  ></p-button>
</p-dialog>
